---
title: 刷题笔记
date: 2023-10-23 14:44:21
tags:
---

### java优先级队列 and 比较器

(1) 比较器Comparator：

Comparator接口定义如下：

```java
public interface Comparator<T> {
 
    int compare(T o1, T o2);
 
    boolean equals(Object obj);
}
```

如果一个类需要实现Comparator接口，它一定要实现compareTo(T o1,T o2) 函数，但可以不实现equals(Object object) 函数。

当第一个参数小于、等于、或大于第二个参数时，compareTo函数返回负值、零值或正值。

可以使用Lambda表达式实现匿名内部类的方法来定义比较器：

```java
Comparator<int[]> comparator = (arr1, arr2) -> arr1[0] - arr2[0];
```

(2) 优先级队列PriorityQueue

**优先级队列默认使用小根堆，升序排列（1的优先级最高，234...优先级依次减少）。**

Java集合框架中提供了**PriorityQueue**和**PriorityBlockingQueue**两种类型的优先级队列，PriorityQueue是**线程不安全**的，PriorityBlockingQueue是**线程安全**的

PriorityQueue的几种常见构造方式：

* PriorityQueue() : 创建一个空的优先级队列，默认容量是11；
* PriorityQueue(int initialCapacity) ：创建一个初始容量为initialCapacity的优先级队列，注意：值小于1会爆出IllegalArgumentException 异常；
* PriorityQueue(Collection <? extends E> c)：用一个集合来创建优先级队列；
* PriorityQueue(Comparator<? super E> comparator) ：创建具有初始容量的优先级队列，并根据指定的比较器对元素进行排序；

**使用比较器comparator构造优先级队列priorityQueue:**

```java
PriorityQueue<Integer> heap = new PriorityQueue<>((n1,n2) -> n1-n2); // 默认的顺序也是如此
```

```java
PriorityQueue<Integer> heap = new PriorityQueue<>((n1,n2) -> n2-n1); // 降序排列（4优先级最高，321优先级依次降低）
```

优先级内部依据比较器返回结果进行处理。

* 在比较n1和n2的时候，如果结果大于0（n1-n2>0）那么将n1下沉（大的数进行下沉，即小根堆的操作）；

* 当比较器返回值修改为n2-n1的时候，如果结果大于0（n2-n1>0）,还是n1下沉（也就是说，无论n1大还是n2大，都会将n1下沉，但是现在这种情况相当于将小的数进行下沉，即大根堆的操作，此时应该是降序排列了）。

